# DataMappin

## 简介
> 这是一个数据驱动视图的插件, 基于jQuery, 灵感来源于d3.js数据可视化


## 步骤
1. 通过jquery获取视图数组, [item, item, item...]
2. `DataMappin.bind(elements, [100, 200, 300])` 通过bind绑定数据数组到视图数组
3. 计算未改动的元素数组, 计算新增的元素数组, 计算减少的元素数组


## 集合
*   `enter` 当数据比获取的视图元素多, 则将多出的放入enter数组
*   `exit`  当数据比获取的视图元素少, 则将多出的视图元素放入exit数组
*   `update`    当视图上绑定的数据与当前再次想绑定的数据相同, 则放入update数组



## 测试
1. 循环`elements`, 并获取视图元素绑定的数据, 


// enters 数组应该与顺序无关, 不能将整个 enters 创建一个node节点集合插入到尾部
// 所以要考虑 enters 是如何插入的

// todo 需要一个对象来存放所有jquery节点, 按照顺序存放, 这样才知道100被110替换, 110节点应该放在哪里






[100, 200, 300] => [110, 200, 300]

// todo #1 思考如何将占位符替换为节点元素, 并替换/插入在正确的位置
// 索引大于elements中的使用插入append, 索引小于等于elements中的使用替换replaceWith


1. elements节点数组为空, data=[100, 200, 300]

循环
    -   100,0 获取索引0所在节点
        -   不存在对应节点
            -   创建占位符节点, 加入enters集合, 以后将由enter()函数替换占位符节点内容, (100数据新增)
        -   存在对应节点， 获取节点绑定数据
            -   数据与100相同
                -   说明索引0视图节点与绑定数据相同, 没有改变, 加入 updates集合, (节点数据 == 100)
            -   数据与100不相同
                -   说明此节点被移除, 加入exits集合, (节点数据对应节点移除)
                -   并且根据当前数据100创建占位符节点， 加入enters集合 (100数据对应节点插入)

操作完毕后:
enters: [占位符100, 占位符200, 占位符300]
updates: []
exits: []





2. elements节点 [节点100, 节点200, 节点300], data=[110, 200, 300, 400]

 循环
    -   110,0 获取索引0所在节点
        -   不存在对应节点
            -   创建占位符节点, 加入enters集合, 以后将由enter()函数替换占位符节点内容, (100数据新增)
        -   存在对应节点， 获取节点绑定数据
            -   数据与110相同
                -   说明索引0视图节点与绑定数据相同, 没有改变, 加入 updates集合, (节点数据 == 110)
            -   数据与110不相同
                -   说明此节点被移除, 加入exits集合, (节点数据对应节点移除)
                -   并且根据当前数据110创建占位符节点， 加入enters集合 (110数据对应节点插入)

操作完毕后:
enters: [占位符110, 占位符400]
updates: [节点200, 节点300]
exits: [节点100]

视图: [节点110(新增), 节点200(未改变), 节点300(未改变), 节点400(新增)]